<div class= "backgroundwhite">
<div class="site-container">
  <div class="sidebar">
  <div class="search-product-container">
  <%= render partial: 'search_bar' %>
  </div>
    <% @sales.each do |sale| %>
    <%= render partial: "card_product", locals: { sale: sale } %>
    <% end %>
  </div>
  <div class="map-container">
    <div id="map" class="thumbnail" style="width: 100%; height: 100%;"></div>
  </div>
</div>
</div>

<% content_for(:after_js) do %>
 <%= javascript_tag do %>
   $(document).on('ready', function() {
     handler = Gmaps.build('Google');
     handler.buildMap({ internal: { id: 'map' } }, function(){
       markers = handler.addMarkers(<%= raw @markers.to_json %>);
       handler.bounds.extendWith(markers);
       handler.fitMapToBounds();
     });
   })

 <% end %>
<% end %>
